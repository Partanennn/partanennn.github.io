<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../../styles.css" />
  <title>Harjoitus 6</title>
</head>

<body>
  <div id="left">
    <ul>
      <li>Linux Harjoitukset</li>
      <li><a href="first-week.html">Harjoitus 1 raportti</a></li>
      <li><a href="second-week.html">Harjoitus 2 raportti</a></li>
      <li><a href="third-week.html">Harjoitus 3 raportti</a></li>
      <li><a href="fourth-week.html">Harjoitus 4 raportti</a></li>
      <li><a href="fifth-week.html">Harjoitus 5 raportti</a></li>
      <li><a href="sixth-week.html">Harjoitus 6 raportti</a></li>
    </ul>
  </div>
  <div id="center">
    <main>
      <h2>Lokaalin tietokoneen tiedot</h2>
      <p><b>GPU:</b> Nvidia RTX 3070</p>
      <p><b>CPU:</b> AMD Ryzen 9 5900X 12-Core</p>
      <p><b>RAM:</b> 32GB</p>
      <p><b>OS:</b> Windows 11 23H2</p>

      <h2>Virtuaalipalvelimen tiedot</h2>
      <p><b>CPU:</b> 1 Core</p>
      <p><b>RAM:</b> 1GB</p>
      <p><b>OS:</b> Debian 12</p>

      <h1>Harjoitus 6: Salataampa</h1>

      <h2>x) Tiivistelmä</h2>

      <h3>Let's Encrypt 2024(Let's Encrypt)</h3>
      <ul>
        <li>Tekee HTTPS palvelimen käytöstä mahdollista</li>
        <li>ACME käyttäjä sovellus auttaa tunnistautumisessa</li>
        <li>Käyttää julkista avainta tunnistamiseen</li>
      </ul>

      <h3>The Apache Software Foundation 2025 (The Apache Software Foundation)</h3>
      <ul>
        <li></li>
      </ul>

      <h2>a) Let's</h2>
      <p>Aloitetaan harjoitus kirjautumalla palvelimelle. Kirjautuminen onnistuu ilman salasanaa normaalisti. Webbisivu
        näkyy oikein domainilla. Seuraavaksi aukaisen 443/tcp portin https yhteyttä varten. Käytän ensiksi komentoa
        <i>sudo ufw status</i>, jolla tarkistan mitkä portit ovat tällä hetkellä auki. 22 ssh yhteyttä varten sekä 80
        http yhteyttä varten ovat auki kuten pitääkin. Aukaisen 443 portin komennolla <i>sudo ufw allow 443/tcp</i>.
      </p>
      <img src="images/Sixth/443port.png" alt="HTTPS port opened" class="image" />

      <p>Lataan certbotin sekä sen tarvitseman python apache paketin komennolla <i>sudo apt-get install certbot
          python3-certbot-apache</i>.</p>
      <p>Tässä vaiheessa huomaan että webbisivuni pyörii ilman name based virtual serveriä tällä hetkellä. Teen
        tarvittavat conffaukset tässä vaiheessa, koska en usko että certbot toimii ilman oikeaa conf tiedostoa. Teen
        kansion <i>publicsites</i> käyttäjän aleksi alle, jonne teen <i>aleksipartanen.space</i> kansion. Kansioon teen
        vain index.html tiedoston, jonne laitan html sisällön. /etc/apache2/sites-available/ kansioon teen
        aleksipartanen.space.conf tiedoston, jonne laitan conffaukset. Nyt lisään komennolla <i>sudo a2ensite
          aleksipartanen.space</i> apachen sites-available kansiossa, joka laittaa sivuston päälle. Käynnistän myös
        apachen uudelleen. Tässä vaiheessa huomaan, että saan forbidden virheilmoituksen nettisivulleni. Muistan, että
        todennäköisesti tämä johtuu oikeukista ja tarkistan asian <i>/var/log/apache2/error.log</i> tiedostosta ja
        totean oletukseni oikeaksi. Apachella ei ollut execute oikeutta /home/aleksi kansioon, ja lisään sen komennolla
        chmod o+x aleksi. Nyt webbisivu näyttää oikein index.html tiedoston sisällön. Subdomainit näyttävät vieläkin
        apachen oletus sivun, joka näyttää tällä hetkellä laser tekstiä.
      </p>

      <img src="images/Sixth/confs.png" class="image" />
      <p>Käyttöikeus virhe</p>
      <img src="images/Sixth/permission-error.png" class="image" />

      <p>Tässä vaiheessa uskallan jo rueta tekemään TLS sertifikaatti tehtävää. Ajan komennon <i>sudo certbot
          --register-unsafely-without-email --apache
          --domains aleksipartanen.space www.aleksipartanen.space</i>. Käytän --register-unsafely-without-email lippua,
        koska en halua sähköpostia tämän harjoitus domainin sertifikaateista. Sertifikaatin tekeminen onnistui.</p>

      <img src="images/Sixth/tls.png" class="image" />

      <p>Nyt verkkosivu ohjaa liikenteen automaattisesti porttiin 443 ja osoitekentässä ei näy enää Chromella <i>Not
          secure</i> tekstiä. <i>aleksipartanen.space.conf</i> tiedostosta myös huomaan, että sinne on tullut certbotin
        tekemänä RewriteEngine, kaksi RewriteCond sekä RewriteRule rivit.</p>

      <img src="images/Sixth/certbot-conf-changes.png" class="image" />

      <h2>b) A-rating</h2>
      <p>Tämä onkin hieman nopeampi tehtävä. Kokeilen SSL Labs sivustoa sertifikaattien tarkastamiseen. Sivulta löytyy,
        että sivustoltani nyt löytyy TLS sertifikaatti. SSL luokitukseni sivuston mukaan on myös A.</p>

      <img src="images/Sixth/ssl.png" class="image" />
      <h2>Tehtävänanto</h2>
      <span>
        <a href="https://terokarvinen.com/linux-palvelimet/#h6-salataampa">h6 Salataampa</a> (Karvinen 2025)
      </span>

      <h2>Lähteet</h2>
      <ul>
        <li>
          The Apache Software Foundation. SSL/TLS Strong Encryption: How-To. Luettavissa:
          <a
            href="https://httpd.apache.org/docs/2.4/ssl/ssl_howto.html#configexample">https://httpd.apache.org/docs/2.4/ssl/ssl_howto.html#configexample</a>
          Luettu: 30.9.2025
        </li>
        <li>
          Let's Encrypt. How it works. Luettavissa:
          <a href="https://letsencrypt.org/how-it-works/">https://letsencrypt.org/how-it-works/</a>
          Luettu: 30.9.2025
        </li>
        <li>
          Karvinen, T. 2025. Linux Palvelimet. Tero Karvinen. Luettavissa:
          <a
            href="https://terokarvinen.com/linux-palvelimet/#h6-salataampa">https://terokarvinen.com/linux-palvelimet/#h6-salataampa</a>.
          Luettu: 30.9.2025.
        </li>
      </ul>
    </main>

    <footer>
      <p><a href="../index.html">Linux Harjoitukset</a></p>
      <p><a href="../../index.html">Etusivu</a></p>
      <p>Aleksi Partanen &#169;2025</p>
    </footer>
  </div>
  <div id="right"></div>
</body>

</html>