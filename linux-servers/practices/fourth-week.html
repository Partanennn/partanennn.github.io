<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../../styles.css" />
  <title>Harjoitus 4</title>
</head>

<body>
  <div id="left">
    <ul>
      <li>Linux Harjoitukset</li>
      <li><a href="first-week.html">Harjoitus 1 raportti</a></li>
      <li><a href="second-week.html">Harjoitus 2 raportti</a></li>
      <li><a href="third-week.html">Harjoitus 3 raportti</a></li>
      <li><a href="fourth-week.html">Harjoitus 4 raportti</a></li>
      <li><a href="fifth-week.html">Harjoitus 5 raportti</a></li>
    </ul>
  </div>
  <div id="center">
    <main>
      <h1>Harjoitus 4: Hello Web Server</h1>

      <h2>x) Lue ja tiivistä</h2>

      <h3>Susanna Lehdon raportti(Lehto 14.2.2022)</h3>
      <ul>
        <li>Kurssille kannattaa valita halvin palvelimen tarjoaja.</li>
        <li>Muista laittaa hälytykset päälle ettei palvelin jää pyörimään kurssin jälkeen</li>
        <li>Palomuuria varten asenna <i>ufw</i> paketti.</li>
        <li>Avaa portti <i>22</i> ja laita palomuuri tämän jälkeen päälle.</li>
        <li>Lisää palvelimelle käyttäjä ryhmään sudo.</li>
        <li>Asenna apache2 sekä avaa portti 80 palomuurista</li>
      </ul>

      <h3>Tero Karvinen Ohjeet (Karvinen 19.9.2017)</h3>
      <ul>
        <li>DigitalOcean ja NameCheap ovat ollee käytössä tässäkin.</li>
        <li>On olemassa myös mm. Linode</li>
        <li>sudo usermod --lock root poistaa vain salasanan käytön mahdollisuuden käyttäjältä</li>
      </ul>

      <h2>a) Vuokraa oma virtuaalipalvelin</h2>
      <p>Päätin ottaa virtuaalipalvelimen Linodelta, koska kurssin verkkosivuilla opettajalta löytyi referal linkki
        kyseiselle sivustolle. Kirjautumisen yhteydessä piti lisätä pankkikortti tilille. Kirjautumisen jälkeen Billing
        sivulla näkyi $100 Promotions kohdassa. Sivustolle kirjautuminen kävi helposti.</p>
      <img src="images/Fourth/image.png" alt="Linode billing" width="700px" />

      <p>Seuraavaksi halusin luoda virtuaalipalvelimen. Vasemmasta sivupalkista valitsin <i>Compute -> Linodes</i>.
        Linode kutsuu heidän virtuaalipalvelimia nimellä <i>Linode</i>. Valitsin Regioniksi Tukholman ja
        käyttöjärjestelmäksi Debian 12. Uskon, että 1GB RAM muistia, 1 CPU sekä 25 GB tallennustilaa. Lisäsin myös
        julkisen avaimeni SSH Keys kohtaan, mutta huomasin ettei se toiminut ja se piti lisätä myöhemmin palvelimelta
        käsin.</p>
      <img src="images/Fourth/linode-creation.png" alt="linode virtual server creation" width="700px" />

      <p>Painoin sivun alhaalta <i>Create Linode</i>, josta pääsin virtuaalipalvelimen omalle hallinta sivulle. Sivun
        vasemmassa yläkulmassa luki <i>Provisioning</i> ja odotin että se muuttui muotoon Running.</p>
      <img src="images/Fourth/linode.png" alt="linode virtual server" width="700px" />

      <h3>b) Tee alkutoimet virtuaalipalvelimella, Tulimuuri päälle, root-tunnus kiinni, ohjelmien päivitys</h3>

      <p>Otin yhteyden palvelimeen powershell:lla käyttäen ssh:ta.</p>
      <img src="images/Fourth/ssh-connection.png" alt="ssh connection" width="700px" />

      <p>Asensin palvelimelle palomuuri sovelluksen <i>ufw</i> komennolla <i>sudo apt-get install ufw</i>. Tämän jälkeen
        avasin ssh portin 22 sekä 80 ja laitoin palomuurin päälle komenolla <i>sudo ufw enable</i>.</p>
      <img src="images/Fourth/open-ports.png" alt="ufw commands" width="700px" />

      <p>Lisäsin uuden käyttäjän palvelimelle. Käytin komentoa <i>sudo adduser aleksi</i>. Lisäsin itseni myös sudo
        ryhmään komennolla <i>sudo adduser aleksi sudo</i> ja kokeilin kirjautua palvelimelle tunnuksella. Kirjautuminen
        onnistui.</p>
      <img src="images/Fourth/ssh-aleksi.png" alt="Aleksi SSH connection" width="700px" />

      <p>Tässä vaiheessa lisäsin kotikoneeni julkisen SSH avaimen käyttäjäni .ssh/authorized_keys tiedostoon. Kokeilin
        kirjautua ulos palvelimelta ja takaisin sisään. Tällä kertaa palvelin ei pyytänyt salasanaa. Nyt voin mennä root
        käyttäjälle ja muokata <i>/etc/ssh/sshd_config</i> tiedostosta palvelimen ssh asetuksia. Laitan sekä
        PermitRootLogin että PasswordAuthentication asetukset pois päältä.</p>
      <img src="images/Fourth/ssh-config1.png" alt="SSH Configurations" width="700px" />
      <img src="images/Fourth/ssh-config2.png" alt="SSH Configurations" width="700px" />

      <p>Nyt yrittäessäni kirjautua sisään root käyttäjällä, saan alla näkyvän Permission denied viestin. Pääsen
        kuitenkin vielä normaalisti sisälle aleksi käyttäjällä. Päivitän vielä lopuksi ohjelmat palvelimelta
        komennooilla update, upgrade ja dist-upgrade.</p>
      <img src="images/Fourth/root-denied.png" alt="SSH root denied" width="700px" />

      <h3>c) Asenna weppipalvelin</h3>
      <p>Asensin Apache2 paketin komennolla <i>sudo apt-get install apache2</i>. Tämän jälkeen kokeilin ottaa yhteyttä
        palvelimeen selaimen kautta ja sain näkyviin apachen default sivun. Vaihdoin default sivun tiedoston
        <i>/var/www/html/index.html</i> sisällön näyttämään vain tekstin <i>laser</i>. Palvelin toimii nyt hienosti.
      </p>
      <img src="images/Fourth/web-server.png" alt="Apache custom default page" width="700px" />

      <h2>Tehtävänanto</h2>
      <span>
        <a href="https://terokarvinen.com/linux-palvelimet/#h4-maailma-kuulee">h4 Maailma kuulee</a> (Karvinen 2025)
      </span>

      <h2>Lähteet</h2>
      <ul>
        <li>
          Karvinen, T. 19.9.2017. First Steps on a New Virtual Private Server. Tero Karvinen. Luettavissa:
          <a
            href="https://terokarvinen.com/2017/first-steps-on-a-new-virtual-private-server-an-example-on-digitalocean/">https://terokarvinen.com/2017/first-steps-on-a-new-virtual-private-server-an-example-on-digitalocean//</a>.
          Luettu: 10.9.2025.
        </li>
        <li>
          Karvinen, T. 2025. Linux Palvelimet. Tero Karvinen. Luettavissa:
          <a
            href="https://terokarvinen.com/linux-palvelimet/#h4-maailma-kuulee">https://terokarvinen.com/linux-palvelimet/#h4-maailma-kuulee</a>.
          Luettu: 10.9.2025.
        </li>
        <li>Lehto, S. 14.2.2022. Teoriasta käytäntöön pilvipalvelimen avulla (h4). Susanna Lehto. Luettavissa: <a
            href="https://susannalehto.fi/2022/teoriasta-kaytantoon-pilvipalvelimen-avulla-h4/">https://susannalehto.fi/2022/teoriasta-kaytantoon-pilvipalvelimen-avulla-h4/</a>.
          Luettu: 10.9.2025.
        </li>
      </ul>
    </main>

    <footer>
      <p><a href="../index.html">Linux Harjoitukset</a></p>
      <p><a href="../../index.html">Etusivu</a></p>
      <p>Aleksi Partanen &#169;2025</p>
    </footer>
  </div>
  <div id="right"></div>
</body>

</html>